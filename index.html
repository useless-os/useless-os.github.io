<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>useless-os</title>
    <style>
        /*
        ========================================
        THEME, CURSOR, & ANIMATION DEFINITIONS
        ========================================
        */
        :root {
            --cursor-default: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADFJREFUOE9jZKAQMFKon2HAx0B2gI0fNEJo2B40QmjYHjRCA4b9AAb/R4NB/w8G/Z8YnJsBAH8sB6kR0L+9AAAAAElFTkSuQmCC'), auto;
            --cursor-pointer: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAANhJREFUOE/N071KA1EQBuAvbH2A1yJasLC1B3iCV3iEV/AIBrcgWAQfwCJYBGt9gZwVBCuxsBFeQZBLeYhZeE9yOU2WJzmf+S/5JRGZ6Hney4CyjGmM+PMyrck0U4iImG4FzAfieQjKx8AEU8dFeSsmvQYj8P2/mP0+eG8HKYtjsTJeL7SnaS5tQxvA7A12N4vLgFkKso4yFk5kGSUaYyP1cmw3Asa9Gz/ADNg9FnzQ3QdPfSkpQmJ1nA4d/gTvXEcSs8jXy2G3sN3Qwh5j6rNlYAAAAASUVORK5CYII='), pointer;
            --cursor-crosshair: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAB1JREFUOE9jZKAQMFKon2HAx0B2gI0fNEJo2B40Qv8GACPaA/fbs5YPAAAAAElFTkSuQmCC'), crosshair;
        }
        .theme-light {
            --bg-main: #ffffff; --bg-secondary: #d1d1d1; --text-main: #000000;
            --border-dark: #000000; --border-light: #444444; --highlight-bg: #000000;
            --highlight-text: #ffffff; --window-title-bg: #b0b0b0; --window-title-text: #000000;
            --input-bg: #f0f0f0; --op-button-bg: #c0c0c0; --graph-color: #000000;
        }
        .theme-cream {
            --bg-main: #e9e2d5; --bg-secondary: #d3c9b8; --text-main: #4a4132;
            --border-dark: #4a4132; --border-light: #8b7e6a; --highlight-bg: #4a4132;
            --highlight-text: #e9e2d5; --window-title-bg: #bdae98; --window-title-text: #4a4132;
            --input-bg: #f5efe2; --op-button-bg: #c2b6a3; --graph-color: #4a4132;
        }
        .theme-dark {
            --bg-main: #1e1e1e; --bg-secondary: #2d2d2d; --text-main: #d4d4d4;
            --border-dark: #cccccc; --border-light: #666666; --highlight-bg: #d4d4d4;
            --highlight-text: #1e1e1e; --window-title-bg: #444444; --window-title-text: #d4d4d4;
            --input-bg: #252526; --op-button-bg: #3e3e3e; --graph-color: #d4d4d4;
        }
        @keyframes blink { 50% { opacity: 0; } }
        .blinking-cursor { animation: blink 1s step-end infinite; }
        
        /* GLOBAL & CORE UI */
        * { box-sizing: border-box; border-radius: 0 !important; }
        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            font-family: 'Lucida Console', 'Courier New', monospace; font-size: 14px;
            color: var(--text-main); background-color: var(--bg-main);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
            user-select: none; cursor: var(--cursor-default);
        }
        button, input, select, textarea { font-family: inherit; color: inherit; }
        button, input[type=color], select, .task-item, #start-button, .desktop-icon, .files-list div, .clickable, .wikiexplorer-result a { cursor: var(--cursor-pointer); }
        .action-button { padding: 8px 12px; border: 1px solid var(--border-dark); background-color: var(--bg-secondary); }
        input[type=text] { border: 1px solid var(--border-light); background: var(--input-bg); padding: 5px; color: var(--text-main); }
        
        /* DESKTOP & TASKBAR */
        #desktop { position: relative; width: 100%; height: 100%; }
        .desktop-icon { position: absolute; width: 80px; text-align: center; padding: 10px 5px; }
        .desktop-icon pre { font-size: 24px; margin-bottom: 5px; }
        .desktop-icon span { font-size: 12px; }
        #taskbar { position: fixed; bottom: 0; left: 0; right: 0; height: 32px; background-color: var(--bg-secondary); border-top: 1px solid var(--border-dark); display: flex; align-items: center; padding: 0 5px; z-index: 10000; }
        #start-button { padding: 4px 10px; border: 1px solid var(--border-light); background-color: var(--bg-secondary); font-weight: bold; }
        #task-items { display: flex; height: 100%; flex-grow: 1; margin-left: 5px; overflow: hidden; }
        .task-item { border: 1px solid var(--border-light); padding: 0 10px; margin: 3px 2px; max-width: 150px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 24px; }
        .task-item.active { background-color: var(--highlight-bg); color: var(--highlight-text); border-color: var(--border-dark); }
        #taskbar-clock { margin-left: auto; padding: 4px 10px; border-left: 1px solid var(--border-light); border-right: 1px solid var(--border-light); flex-shrink: 0; }
        
        /* ORGANIZED START MENU */
        #start-menu { display: none; position: fixed; bottom: 32px; left: 0; width: 200px; background-color: var(--bg-secondary); border: 1px solid var(--border-dark); border-bottom: none; z-index: 9999; padding: 5px 0; }
        #start-menu.visible { display: block; }
        #start-menu ul { list-style: none; margin: 0; padding: 0; }
        #start-menu li { position: relative; }
        #start-menu li a { display: flex; justify-content: space-between; align-items: center; padding: 8px 15px; text-decoration: none; color: var(--text-main); }
        #start-menu li a:hover, #start-menu li:hover > a { background-color: var(--highlight-bg); color: var(--highlight-text); }
        #start-menu .divider { height: 1px; background-color: var(--border-light); margin: 5px 0; }
        #start-menu .submenu { display: none; position: absolute; left: 100%; top: -6px; width: 200px; background-color: var(--bg-secondary); border: 1px solid var(--border-dark); padding: 5px 0; }
        #start-menu li:hover > .submenu { display: block; }

        /* WINDOW & APP STYLES */
        .window { position: absolute; display: flex; flex-direction: column; width: 450px; height: 300px; min-width: 250px; min-height: 150px; background-color: var(--bg-main); border: 1px solid var(--border-dark); box-shadow: 5px 5px 0px rgba(0, 0, 0, 0.2); resize: both; overflow: hidden; }
        .window .title-bar { background-color: var(--window-title-bg); padding: 5px 8px; cursor: move; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-dark); flex-shrink: 0; }
        .window-content { padding: 15px; flex-grow: 1; overflow: auto; cursor: var(--cursor-default); user-select: text; }
        .window-content-nopad { padding: 0 !important; overflow: hidden; user-select: none; }
        iframe { width: 100%; height: 100%; border: none; background: #000; }
        canvas { display: block; width: 100%; height: 100%; background: var(--input-bg); }
        textarea { background: var(--input-bg); border: 1px solid var(--border-light); color: var(--text-main); width: 100%; height: 100%; resize: none; padding: 5px; }
        pre { white-space: pre-wrap; word-wrap: break-word; margin: 0; }
        .terminal-app pre { white-space: pre; } /* fix for neofetch */
        .wikiexplorer-result a { color: inherit; text-decoration: none; }
    </style>
</head>
<body class="theme-light">

    <div id="desktop">
        <div class="desktop-icon" data-app="terminal" style="top: 20px; left: 20px;"><pre>[ >_ ]</pre><span>Terminal</span></div>
        <div class="desktop-icon" data-app="files" style="top: 120px; left: 20px;"><pre>[ F: ]</pre><span>File Mgr</span></div>
        <div class="desktop-icon" data-app="notepad" style="top: 220px; left: 20px;"><pre>[.txt]</pre><span>Text Editor</span></div>
        <div class="desktop-icon" data-app="demoview" style="top: 20px; left: 120px;"><pre>[/\\]</pre><span>demoview</span></div>
        <div class="desktop-icon" data-app="arenaViz" style="top: 120px; left: 120px;"><pre>[viz]</pre><span>arena-viz</span></div>
    </div>

    <div id="taskbar">
        <div id="start-button">[ START ]</div>
        <div id="task-items"></div>
        <div id="taskbar-clock">00:00:00</div>
    </div>

    <div id="start-menu">
        <ul>
            <li>
                <a href="#">Utilities <span>></span></a>
                <ul class="submenu">
                    <li><a data-app="calculator">Calculator</a></li>
                    <li><a data-app="paint">Glimpse-Paint</a></li>
                    <li><a data-app="notepad">Text Editor</a></li>
                </ul>
            </li>
            <li>
                <a href="#">System <span>></span></a>
                <ul class="submenu">
                    <li><a data-app="files">File Manager</a></li>
                    <li><a data-app="terminal">Terminal</a></li>
                    <li class="divider"></li>
                    <li><a data-app="procs">procs</a></li>
                    <li><a data-app="netmon">netmon</a></li>
                    <li><a data-app="df">df</a></li>
                    <li class="divider"></li>
                    <li><a data-app="settings">Settings</a></li>
                </ul>
            </li>
            <li class="divider"></li>
            <li>
                <a href="#">Internet <span>></span></a>
                <ul class="submenu">
                    <li><a data-app="wikiexplorer">Web-Get</a></li>
                    <li><a data-app="poke-dex">Poké-Dex</a></li>
                    <li><a data-app="iss-tracker">ISS-Tracker</a></li>
                    <li class="divider"></li>
                    <li><a data-app="cat-facts">Cat Facts</a></li>
                    <li><a data-app="doggo-viewer">Doggo Viewer</a></li>
                    <li><a data-app="joke-bot">Joke Bot</a></li>
                    <li><a data-app="num-facts">Number Facts</a></li>
                    <li class="divider"></li>
                    <li><a data-app="profiler">Profiler</a></li>
                    <li><a data-app="hack-sim">Hack-Sim</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Fun <span>></span></a>
                <ul class="submenu">
                    <li><a data-app="ansiart">ASCII-View</a></li>
                    <li><a data-app="demoview">demoview</a></li>
                    <li><a data-app="arenaViz">arena-viz</a></li>
                    <li><a data-app="minAudioViz">min-audio-viz</a></li>
                </ul>
            </li>
            <li class="divider"></li>
            <li><a href="javascript:void(0)" onclick="alert('Close the tab to shutdown.');">Shutdown...</a></li>
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const desktop = document.getElementById('desktop');
            const startButton = document.getElementById('start-button');
            const startMenu = document.getElementById('start-menu');
            
            let windowIdCounter = 0, zIndexCounter = 1;
            const windowRegistry = {};

            // CORE UI & WINDOW MANAGEMENT
            startButton.addEventListener('click', e => { e.stopPropagation(); startMenu.classList.toggle('visible'); });
            document.addEventListener('click', (e) => { 
                startMenu.classList.remove('visible'); 
                const icon = e.target.closest('.desktop-icon');
                if (icon) { apps[icon.dataset.app](); }
            });
            setInterval(() => { document.getElementById('taskbar-clock').textContent = new Date().toLocaleTimeString('en-GB'); }, 1000);

            const bringToFront = (winEl) => {
                winEl.style.zIndex = ++zIndexCounter;
                document.querySelectorAll('.task-item').forEach(i=>i.classList.remove('active'));
                if(windowRegistry[winEl.id]?.taskItem) windowRegistry[winEl.id].taskItem.classList.add('active');
            };
            const closeWindow = (id) => {
                const winData = windowRegistry[id];
                if (winData) { if (winData.cleanup) winData.cleanup(); winData.windowEl.remove(); winData.taskItem.remove(); delete windowRegistry[id]; }
            };
            const makeDraggable = (winEl) => {
                const titleBar = winEl.querySelector('.title-bar'); let isDragging = false, oX, oY;
                const start = e => { isDragging=true; const t=e.touches?e.touches[0]:e; oX=t.clientX-winEl.offsetLeft; oY=t.clientY-winEl.offsetTop; bringToFront(winEl); };
                const drag = e => { if(!isDragging)return; e.preventDefault(); const t=e.touches?e.touches[0]:e; let nX=t.clientX-oX, nY=t.clientY-oY; nX=Math.max(0,Math.min(nX,window.innerWidth-winEl.offsetWidth)); nY=Math.max(0,Math.min(nY,window.innerHeight-winEl.offsetHeight-32)); winEl.style.left=`${nX}px`;winEl.style.top=`${nY}px`; };
                const stop = () => { isDragging = false; };
                titleBar.addEventListener('mousedown', start); document.addEventListener('mousemove', drag); document.addEventListener('mouseup', stop);
                titleBar.addEventListener('touchstart', start, {passive:false}); document.addEventListener('touchmove', drag, {passive:false}); document.addEventListener('touchend', stop);
                winEl.addEventListener('mousedown', ()=>bringToFront(winEl)); winEl.addEventListener('touchstart', ()=>bringToFront(winEl));
            };
            const createWindow = (title, content, opts={}) => {
                const id=`window-${++windowIdCounter}`, {w=450,h=300,t=60,l=100}=opts;
                const win = document.createElement('div'); win.className='window'; win.id=id; win.tabIndex=-1;
                win.style.cssText=`width:${w}px; height:${h}px; top:${t+(windowIdCounter%10)*20}px; left:${l+(windowIdCounter%10)*20}px;`;
                win.innerHTML=`<div class="title-bar"><span class="title">${title}</span><div class="window-controls"><button>X</button></div></div>${content}`;
                desktop.appendChild(win);
                const taskItem=document.createElement('div'); taskItem.className='task-item'; taskItem.textContent=title;
                taskItem.addEventListener('click',()=>bringToFront(win)); document.getElementById('task-items').appendChild(taskItem);
                windowRegistry[id]={windowEl:win, taskItem:taskItem};
                win.querySelector('button').addEventListener('click',()=>closeWindow(id));
                makeDraggable(win); bringToFront(win);
                return win;
            };

            // APPLICATION DEFINITIONS
            const apps = {
                notepad: (initialContent='')=>{const w=createWindow('Text Editor',`<div class="window-content"><textarea spellcheck="false"></textarea></div>`); const t=w.querySelector('textarea'); t.value=initialContent; if(w.querySelector('.title').textContent==='notes.txt'){t.addEventListener('input',()=>localStorage.setItem('useless-os-notes.txt',t.value))}},
                settings: ()=>{const w=createWindow('Settings',`<div class="window-content"><p>Select theme:</p><button data-theme="theme-light">Light</button><button data-theme="theme-cream">Cream</button><button data-theme="theme-dark">Dark</button></div>`,{w:350,h:180});w.querySelectorAll('[data-theme]').forEach(b=>b.addEventListener('click',()=>document.body.className=b.dataset.theme))},
                files: ()=>{const w=createWindow('File Manager',`<div class="window-content"><div class="files-list"><div>/</div><div>  [D] home</div><div>    [D] guest</div><div class="clickable" data-action="open-notes">      [F] notes.txt</div></div></div>`,{w:350});w.querySelector('[data-action="open-notes"]').addEventListener('click',()=>{const n=apps.notepad(localStorage.getItem('useless-os-notes.txt')||'');n.querySelector('.title').textContent='notes.txt'})},
                terminal: ()=>{const w=createWindow('Terminal',`<div class="window-content window-content-nopad"><div class="terminal-app"><pre></pre><div class="terminal-input-line"><span>></span><input type="text"><span class="blinking-cursor">_</span></div></div></div>`);const o=w.querySelector('pre'),i=w.querySelector('input');const log=m=>{o.textContent+=m+'\n';o.scrollTop=o.scrollHeight};const cmds={help:()=>log('ls, whoami, pwd, neofetch, echo, clear, exit'),ls:()=>log('home'),whoami:()=>log('guest'),pwd:()=>log('/home/guest'),neofetch:()=>log(`    guest@useless-os\n    -----------------\n    OS: useless-os`),echo:a=>log(a.join(' ')),clear:()=>o.textContent='',exit:()=>closeWindow(w.id)};log('useless-os Terminal. help for commands.');i.addEventListener('keydown',e=>{if(e.key!=='Enter'||!i.value)return;const[c,...a]=i.value.trim().toLowerCase().split(' ');log(`> ${i.value}`);if(cmds[c])cmds[c](a);else if(c)log(`cmd not found: ${c}`);i.value=''})},
                wikiexplorer: ()=>{const w=createWindow('Web-Get',`<div class="window-content"><p>Fetch random summary from Wikipedia.</p><button class="action-button">[ GET NEW ]</button><div class="wikiexplorer-result" style="margin-top:10px; border:1px solid var(--border-light); background:var(--input-bg); padding:10px; min-height:100px;">Awaiting...</div></div>`);const b=w.querySelector('button'),r=w.querySelector('.wikiexplorer-result');const f=async()=>{r.innerHTML='<i>Fetching...</i>';try{const d=await fetch('https://en.wikipedia.org/api/rest_v1/page/random/summary'),p=await d.json();if(!d.ok)throw new Error('Network Error');r.innerHTML=`<p><strong><a href="${p.content_urls.desktop.page}" target="_blank" rel="noopener noreferrer">${p.title}</a></strong></p><p>${p.extract}</p>`}catch(e){r.innerHTML=`<p><strong>ERROR:</strong></p><pre>${e.message}</pre>`}};b.addEventListener('click',f);f()},
                procs: ()=>{const w=createWindow('procs',`<div class="window-content window-content-nopad"><pre></pre></div>`,{w:500,h:400});const p=w.querySelector('pre');const ps=["kernel_task","systemd","udevd","procs"];const u=()=>{let t="PID   CPU%  MEM   COMMAND\n";ps.forEach((n,i)=>{t+=`${(101+i*3)}`.padEnd(6)+`${(Math.random()*(n==='procs'?5:1)).toFixed(1)}`.padEnd(6)+`${(Math.random()*200).toFixed(0)}`.padEnd(6)+`${n}\n`});p.textContent=t};const int=setInterval(u,1500);windowRegistry[w.id].cleanup=()=>clearInterval(int);u()},
                netmon: ()=>{const w=createWindow('netmon',`<div class="window-content window-content-nopad"><canvas></canvas></div>`,{w:400,h:200});const c=w.querySelector('canvas'),x=c.getContext('2d');let d=Array(100).fill(0);const u=()=>{d.shift();d.push(Math.random()*c.height);x.clearRect(0,0,c.width,c.height);x.beginPath();x.strokeStyle=getComputedStyle(document.body).getPropertyValue('--graph-color');d.forEach((v,i)=>x.lineTo(i*(c.width/100),c.height-v));x.stroke()};new ResizeObserver(()=>{c.width=c.offsetWidth;c.height=c.offsetHeight}).observe(c);u();const int=setInterval(u,100);windowRegistry[w.id].cleanup=()=>clearInterval(int)},
                demoview: ()=>{const w=createWindow('demoview',`<div class="window-content window-content-nopad"><canvas></canvas></div>`);const c=w.querySelector('canvas'),x=c.getContext('2d');let s=[],a;const r=()=>{c.width=c.offsetWidth;c.height=c.offsetHeight;s=[];for(let i=0;i<10;i++)s.push({x:Math.random()*c.width,y:Math.random()*c.height,s:Math.random()*15+5,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2,t:Math.random()>.5?'r':'l'})};const an=()=>{x.clearRect(0,0,c.width,c.height);s.forEach(o=>{o.x+=o.dx;o.y+=o.dy;if(o.x<0||o.x>c.width-o.s)o.dx*=-1;if(o.y<0||o.y>c.height-o.s)o.dy*=-1;x.strokeStyle=getComputedStyle(document.body).getPropertyValue('--text-main');if(o.t==='r')x.strokeRect(o.x,o.y,o.s,o.s);else{x.beginPath();x.moveTo(o.x,o.y);x.lineTo(o.x+o.s,o.y+o.s);x.stroke()}});a=requestAnimationFrame(an)};new ResizeObserver(r).observe(c);r();an();windowRegistry[w.id].cleanup=()=>cancelAnimationFrame(a)},
                cat-facts: ()=>{const w=createWindow('Cat Facts',`<div class="window-content"><p>...</p><button class="action-button">New Fact</button></div>`);const p=w.querySelector('p'),b=w.querySelector('button');const f=async()=>{p.textContent='Fetching...';try{const d=await fetch('https://catfact.ninja/fact'),j=await d.json();p.textContent=j.fact}catch{p.textContent='Error.'}};b.addEventListener('click',f);f()},
                profiler: ()=>{const w=createWindow('Profiler',`<div class="window-content"><p>Enter name:</p><input type="text"><button class="action-button">Profile</button><pre style="margin-top:10px;"></pre></div>`,{w:380,h:250});const i=w.querySelector('input'),b=w.querySelector('button'),o=w.querySelector('pre');b.addEventListener('click',async()=>{const n=i.value;if(!n)return;o.textContent='Profiling...';try{const[a,g,c]=await Promise.all([fetch(`https://api.agify.io?name=${n}`),fetch(`https://api.genderize.io?name=${n}`),fetch(`https://api.nationalize.io?name=${n}`)]);const[aj,gj,cj]=await Promise.all([a.json(),g.json(),c.json()]);const nat=cj.country[0]?`${cj.country[0].country_id} (${(cj.country[0].probability*100).toFixed(0)}%)`:'Unknown';o.textContent=`Name: ${n}\nAge: ${aj.age||'?'}\nGender: ${gj.gender||'?'}\nNationality: ${nat}`}catch{o.textContent='Error.'}})},
                'doggo-viewer': ()=>{const w=createWindow('Doggo Viewer',`<div class="window-content" style="text-align:center;"><p>BEHOLD.</p><img style="max-width:100%; max-height:200px; border:1px solid var(--border-light);"><button class="action-button" style="margin-top:10px;">New Doggo</button></div>`,{w:350,h:350});const i=w.querySelector('img'),b=w.querySelector('button');const f=async()=>{i.src='';try{const d=await fetch('https://dog.ceo/api/breeds/image/random'),j=await d.json();i.src=j.message}catch{i.alt='Error'}};b.addEventListener('click',f);f()},
                'hack-sim': ()=>{const w=createWindow('Hack-Sim',`<div class="window-content"><pre></pre><button class="action-button">New Target</button></div>`,{w:400,h:380});const p=w.querySelector('pre'),b=w.querySelector('button');const f=async()=>{p.textContent='Acquiring target...';try{const d=await fetch('https://randomuser.me/api/'),j=await d.json(),u=j.results[0];p.textContent=`TARGET ACQUIRED\n\nName: ${u.name.first} ${u.name.last}\nAddr: ${u.location.street.number} ${u.location.street.name}\nCity: ${u.location.city}\nEmail: ${u.email}\nUser: ${u.login.username}\nPass: ${u.login.password}`}catch{p.textContent='Failed.'}};b.addEventListener('click',f);f()},
                'joke-bot': ()=>{const w=createWindow('Joke Bot',`<div class="window-content"><p>...</p><button class="action-button">New Joke</button></div>`);const p=w.querySelector('p'),b=w.querySelector('button');const f=async()=>{p.textContent='...';try{const d=await fetch('https://official-joke-api.appspot.com/random_joke'),j=await d.json();p.textContent=j.setup;setTimeout(()=>p.textContent+='\n\n'+j.punchline,2000)}catch{p.textContent='No jokes.'}};b.addEventListener('click',f);f()},
                'num-facts': ()=>{const w=createWindow('Number Facts',`<div class="window-content"><p>...</p><button class="action-button">New Fact</button></div>`);const p=w.querySelector('p'),b=w.querySelector('button');const f=async()=>{p.textContent='...';try{const d=await fetch('https://numbersapi.com/random/math?json'),j=await d.json();p.textContent=j.text}catch{p.textContent='Error.'}};b.addEventListener('click',f);f()},
                'poke-dex': ()=>{const w=createWindow('Poké-Dex',`<div class="window-content" style="text-align:center;"><img style="width:96px;height:96px;"><pre></pre><button class="action-button">Random</button></div>`,{w:300,h:300});const i=w.querySelector('img'),p=w.querySelector('pre'),b=w.querySelector('button');const f=async()=>{p.textContent='...';i.src='';try{const r=Math.floor(Math.random()*1025)+1,d=await fetch(`https://pokeapi.co/api/v2/pokemon/${r}`),j=await d.json();i.src=j.sprites.front_default;p.textContent=`#${j.id} ${j.name}\nType: ${j.types.map(t=>t.type.name).join(', ')}`}catch{p.textContent='Not found.'}};b.addEventListener('click',f);f()},
                'iss-tracker': ()=>{const w=createWindow('ISS-Tracker',`<div class="window-content"><div id="iss-loc"></div><hr><div id="iss-peeps"></div></div>`,{w:400,h:350});const loc=w.querySelector('#iss-loc'),peeps=w.querySelector('#iss-peeps');(async()=>{peeps.textContent='Loading...';try{const d=await fetch('https://api.open-notify.org/astros.json'),j=await d.json();peeps.innerHTML=`<strong>People in Space (${j.number}):</strong><ul>${j.people.map(p=>`<li>${p.name}</li>`).join('')}</ul>`}catch{peeps.textContent='Error.'}})();const u=async()=>{try{const d=await fetch('https://api.open-notify.org/iss-now.json'),j=await d.json();loc.innerHTML=`<strong>Current Location:</strong>\nLat: ${j.iss_position.latitude}\nLon: ${j.iss_position.longitude}`}catch{loc.textContent='Error.'}};const int=setInterval(u,5000);windowRegistry[w.id].cleanup=()=>clearInterval(int);u()},
                arenaViz:()=>createWindow('arena-viz','<div class="window-content window-content-nopad"><iframe src="https://arena-visualizer.github.io"></iframe></div>',{w:640,h:480}),
                minAudioViz:()=>createWindow('min-audio-viz','<div class="window-content window-content-nopad"><iframe src="https://minimal-audio-visualizer.github.io"></iframe></div>',{w:640,h:480}),
                // Keep old apps for compatibility
                calculator:()=>{const w=createWindow('Calculator',`<div class="window-content"><div class="calculator"><div class="display">0</div><button>7</button><button>8</button><button>9</button><button class="op">/</button><button>4</button><button>5</button><button>6</button><button class="op">*</button><button>1</button><button>2</button><button>3</button><button class="op">-</button><button>C</button><button>0</button><button>=</button><button class="op">+</button></div></div>`,{w:280,h:350});const d=w.querySelector('.display');let c='0',err=false;const h=v=>{if(err&&v!=='C'){c='0';err=false}if(v==='C')c='0';else if(v==='='){try{c=String(eval(c.replace(/[^-()\d/*+.]/g,'')))}catch{c='Error';err=true}}else{c=(c==='0')?v:c+v}d.textContent=c};w.querySelector('.calculator').addEventListener('click',e=>{if(e.target.tagName==='BUTTON')h(e.target.textContent)});w.addEventListener('keydown',e=>{e.preventDefault();if(e.key.match(/^[0-9\+\-\*\/]$/))h(e.key);if(e.key==='Enter')h('=');if(e.key==='Backspace'||e.key==='c')h('C')})},
                paint:()=>{const w=createWindow('Glimpse-Paint',`<div class="window-content"><div class="paint-app"><div class="toolbar">Color:<input type="color" value="#000000">Brush:<button data-size="2">S</button><button data-size="5">M</button><button data-size="10">L</button></div><canvas></canvas></div></div>`,{w:500,h:400});const c=w.querySelector('canvas'),x=c.getContext('2d');let bS=2;new ResizeObserver(()=>(c.width=c.offsetWidth,c.height=c.offsetHeight)).observe(c);let p=false;const dr=e=>{if(!p)return;x.lineWidth=bS;x.lineCap='butt';x.strokeStyle=w.querySelector('input').value;x.lineTo(e.offsetX,e.offsetY);x.stroke();x.beginPath();x.moveTo(e.offsetX,e.offsetY)};c.addEventListener('mousedown',e=>{p=true;dr(e)});c.addEventListener('mouseup',()=>{p=false;x.beginPath()});c.addEventListener('mousemove',dr);w.querySelector('.toolbar').addEventListener('click',e=>{if(e.target.dataset.size)bS=e.target.dataset.size})},
                df:()=>createWindow('df','<div class="window-content"><pre>Filesystem    Size   Used  Avail  Use%\n/dev/sda1     100G    75G    25G   75% [███████████████-----]\n/dev/memfs     1G   100M   900M   10% [██------------------]</pre></div>',{w:450,h:180})
            };

            // APP LAUNCHER & INITIALIZATION
            startMenu.addEventListener('click', (e) => {
                const appName = e.target.dataset.app;
                if (appName) { e.preventDefault(); startMenu.classList.remove('visible'); if (apps[appName]) apps[appName](); }
            });
            createWindow('boot.log', `<div class="window-content"><p>> useless-os loaded successfully.</p><p>> STATUS: AWAITING_INPUT...</p></div>`, {t: 40, l: 220});
        });
    </script>
</body>
</html>
